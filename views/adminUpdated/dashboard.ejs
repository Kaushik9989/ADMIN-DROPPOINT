<% layout("/layouts/boilerplate") %>

<div class="container py-4">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-3">
    <div class="d-flex align-items-center gap-3">
      <i class="fa-solid fa-table-cells-large fa-2x text-primary"></i>
      <div>
        <h3 class="fw-bold mb-0">DropPoint Systems</h3>
        <small class="text-muted">Smart Locker Infrastructure Platform</small>
      </div>
    </div>
    <div>
      <span class="badge bg-success"><i class="fa-solid fa-bolt me-1"></i>System Online</span>
      <button class="btn btn-light btn-sm ms-2">
        <i class="fa-solid fa-bell"></i>
      </button>
    </div>
  </div>

  <!-- Nav Tabs -->
  <ul class="nav nav-pills mb-4" id="systemTabs">
    <li class="nav-item"><a class="nav-link active" data-bs-toggle="pill" href="#dashboard"><i class="fa-solid fa-chart-line me-1"></i>Dashboard</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#lockers"><i class="fa-solid fa-table-cells me-1"></i>Lockers</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#admin"><i class="fa-solid fa-gear me-1"></i>Admin</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#partners"><i class="fa-solid fa-truck me-1"></i>Partners</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#services"><i class="fa-solid fa-box me-1"></i>Services</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#support"><i class="fa-solid fa-wrench me-1"></i>Support</a></li>
    <li class="nav-item"><a class="nav-link" data-bs-toggle="pill" href="#users"><i class="fa-solid fa-users me-1"></i>Users</a></li>
  </ul>

  <!-- Dashboard Content -->
  <div class="tab-content">
    <div class="tab-pane fade show active" id="dashboard">
      <!-- Summary Cards -->
      <div class="row g-4">
        <div class="col-md-3">
          <div class="card shadow-sm">
            <div class="card-body">
              <h6 class="text-muted">Total Lockers</h6>
              <h4 class="fw-bold">2,500</h4>
              <p class="small text-muted">2,347 active • <strong style="color: rgb(248, 14, 14);">106 offline</strong></p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card shadow-sm">
            <div class="card-body">
              <h6 class="text-muted">Occupancy Rate</h6>
              <h4 class="fw-bold">79.0%</h4>
              <div class="progress mt-2" style="height: 6px;">
                <div class="progress-bar bg-primary" style="width: 79%"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card shadow-sm">
            <div class="card-body">
              <h6 class="text-muted">Monthly Revenue</h6>
              <h4 class="fw-bold">₹45,780</h4>
              <p class="small text-success mb-0">+12% from last month</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card shadow-sm">
            <div class="card-body">
              <h6 class="text-muted">Active Partners</h6>
              <h4 class="fw-bold">23</h4>
              <p class="small text-muted mb-0">3 new this month</p>
            </div>
          </div>
        </div>
      </div>

      <!-- System Health -->
      <div class="row g-4 mt-4">
        <div class="col-md-4">
          <div class="card shadow-sm">
            <div class="card-body">
              <h6 class="text-muted">System Uptime</h6>
              <h4 class="fw-bold text-success">95.8%</h4>
              <div class="progress mt-2" style="height: 6px;">
                <div class="progress-bar bg-success" style="width: 95.8%"></div>
              </div>
              <p class="small text-muted mt-2">2,394 lockers online</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card shadow-sm">
            <div class="card-body">
              <h6 class="text-muted">Maintenance Required</h6>
              <h4 class="fw-bold text-warning">1.9%</h4>
              <div class="progress mt-2" style="height: 6px;">
                <div class="progress-bar bg-warning" style="width: 1.9%"></div>
              </div>
              <p class="small text-muted mt-2">47 lockers need attention</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card shadow-sm">
            <div class="card-body">
              <h6 class="text-muted">Support Issues</h6>
              <h4 class="fw-bold">12</h4>
              <p class="small text-muted">Pending resolution</p>
              <a href="#support" class="btn btn-outline-primary btn-sm">View Issues</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="card shadow-sm mt-4">
        <div class="card-header">
          <h5 class="mb-0">Recent Activity</h5>
          <small class="text-muted">Latest system events and transactions</small>
        </div>
        <div class="card-body">
          <% const activity = [
            { type: 'locker_occupied', icon: 'fa-box', color: 'text-primary', msg: 'Locker A-247 occupied by laundry service', time: '2 mins ago', location: 'Downtown Hub' },
            { type: 'partner_api', icon: 'fa-bolt', color: 'text-success', msg: 'QuickClean API accessed locker grid', time: '5 mins ago', location: 'Mall Central' },
            { type: 'maintenance', icon: 'fa-wrench', color: 'text-warning', msg: 'Maintenance completed on B-156', time: '15 mins ago', location: 'Airport Terminal' },
            { type: 'new_registration', icon: 'fa-table-cells', color: 'text-purple', msg: 'New locker bank registered', time: '1 hour ago', location: 'University Campus' }
          ]; %>

          <% activity.forEach(item => { %>
            <div class="d-flex align-items-start border rounded p-3 mb-3">
              <i class="fa-solid <%= item.icon %> me-3 <%= item.color %>"></i>
              <div class="flex-grow-1">
                <div><%= item.msg %></div>
                <small class="text-muted d-block mt-1"><i class="fa-solid fa-clock me-1"></i><%= item.time %> &nbsp; • &nbsp;<i class="fa-solid fa-location-dot me-1"></i><%= item.location %></small>
              </div>
            </div>
          <% }) %>
        </div>
      </div>
    </div>

    <!-- Placeholder Tabs -->
    <div class="tab-pane fade" id="lockers"><p>Locker management UI coming soon.</p></div>
    <div class="tab-pane fade" id="admin"><p>Admin settings coming soon.</p></div>
    <div class="tab-pane fade" id="partners"><p>Partner portal UI coming soon.</p></div>
    <div class="tab-pane fade" id="services"><p>Service marketplace coming soon.</p></div>
    <div class="tab-pane fade" id="support"><p>Support tickets and issues UI coming soon.</p></div>
    <div class="tab-pane fade" id="users"><p>User management interface coming soon.</p></div>
  </div>
</div>
