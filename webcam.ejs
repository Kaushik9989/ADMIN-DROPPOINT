<div id="qr-reader" style="width:300px;"></div>
<div id="qr-result"></div>

<script>
  function onScanSuccess(decodedText, decodedResult) {
    console.log(`QR Code Scanned: ${decodedText}`);
    document.getElementById("qr-result").innerText = decodedText;

    // You can parse the data like:
    const params = new URLSearchParams(decodedText);
    const lockerId = params.get("lockerId");
    const compartment = params.get("compartment");
    const otp = params.get("otp");

    console.log({ lockerId, compartment, otp });
    // Send to server or call unlock function
  }

  const html5QrCode = new Html5Qrcode("qr-reader");
  html5QrCode.start(
    { facingMode: "environment" }, 
    { fps: 10, qrbox: 250 },
    onScanSuccess
  );
</script>
